const translations = {
  pt: {
    splash: "Portifolio de<br><strong>Davi Manieri</strong>",
    name: "DAVI MANIERI",
    role: "ENGENHEIRO DE COMPUTACAO",
    subtitle: "Interfaces silenciosas.<br>Codigo com proposito.",
    enter: "Entrar",
    copyright: "DAVI MANIERI © 2026",
    location: "Brasil",
    statusOnline: "ONLINE",
    langPt: "PT",
    langEn: "EN",
    themeDark: "Escuro",
    themeLight: "Claro",
    menuAria: "Navegacao principal",
    menuHome: "Home",
    menuResume: "Curriculo",
    menuProjects: "Projetos",
    menuCertificates: "Certificados",
    menuExperiences: "Experiencia",
    menuContact: "Fale comigo",
    panelHome: "Programador na Tecnomotor Eletronica, Tecnico em Desenvolvimento de Sistemas (SENAI) e estudante de Engenharia da Computacao pela UNIVESP.\nFormacao em Python, mais de 20 certificados em tecnologia e solida base em logica e desenvolvimento de software. Perfil pratico, analitico e focado em resultados.",
    panelProjectsLoading: "Carregando projetos...",
    panelExperiencesLoading: "Carregando experiencia...",
    panelCertificatesLoading: "Carregando certificados...",
    panelContact: "- LinkedIn: <a href=\"https://www.linkedin.com/in/davi-ponce-manieri/\" target=\"_blank\" rel=\"noopener\">linkedin.com/in/davi-ponce-manieri</a>\n- GitHub: <a href=\"https://github.com/dvmanieri44\" target=\"_blank\" rel=\"noopener\">github.com/dvmanieri44</a>\n- Telefone: +55 (16) 997037115\n- Email: dvponce3@gmail.com",
    emptyProjects: "Nenhum projeto cadastrado.",
    emptyExperiences: "Nenhuma experiencia cadastrada.",
    emptyCertificates: "Nenhum certificado cadastrado.",
    errorProjects: "Nao foi possivel carregar os projetos.",
    errorExperiences: "Nao foi possivel carregar as experiencias.",
    errorCertificates: "Nao foi possivel carregar os certificados.",
    projectStatusDone: "Finalizado",
    projectStatusOngoing: "Em andamento",
    labelCurrent: "Atual",
    experienceCurrent: "Trabalho atual",
    certificateStatusCurrent: "Em andamento",
    certificateFormacao: "Formacao",
    projectLinkOpen: "Abrir projeto",
    popupTabProjects: "Projetos",
    popupTabCertificates: "Certificados",
    popupTabExperiences: "Experiencia",
    popupAriaAdd: "Adicionar",
    popupTitleProject: "Novo projeto",
    popupTitleCertificate: "Novo certificado",
    popupTitleExperience: "Nova experiencia",
    popupLabelTitle: "Titulo",
    popupLabelDescription: "Descricao",
    popupLabelUrl: "URL",
    popupLabelStart: "Inicio",
    popupLabelEnd: "Fim",
    popupLabelFinished: "Finalizado",
    popupLabelInstitution: "Instituicao emissora",
    popupLabelCurrent: "Fazendo atualmente",
    popupLabelCompany: "Nome da empresa",
    popupLabelRole: "Nome do cargo",
    popupLabelEntryDate: "Data de entrada",
    popupLabelExitDate: "Data de saida",
    popupLabelCurrentJob: "Trabalho atual",
    popupButtonCancel: "Cancelar",
    popupButtonSave: "Salvar",
    popupStatusSaving: "Salvando...",
    popupStatusProjectSaved: "Projeto salvo.",
    popupStatusCertificateSaved: "Certificado salvo.",
    popupStatusExperienceSaved: "Experiencia salva.",
    popupStatusError: "Erro ao salvar.",
    promptPassword: "Digite a senha",
    promptWrongPassword: "Senha incorreta."
  },
  en: {
    splash: "Portfolio of<br><strong>Davi Manieri</strong>",
    name: "DAVI MANIERI",
    role: "COMPUTER ENGINEER",
    subtitle: "Silent interfaces.<br>Purpose-driven code.",
    enter: "Enter",
    copyright: "DAVI MANIERI © 2026",
    location: "Brazil",
    statusOnline: "ONLINE",
    langPt: "PT",
    langEn: "EN",
    themeDark: "Dark",
    themeLight: "Light",
    menuAria: "Main navigation",
    menuHome: "Home",
    menuResume: "Resume",
    menuProjects: "Projects",
    menuCertificates: "Certificates",
    menuExperiences: "Experience",
    menuContact: "Contact",
    panelHome: "Programmer at Tecnomotor Eletronica, Systems Development Technician (SENAI), and Computer Engineering student at UNIVESP.\nTrained in Python, with 20+ tech certificates and a solid foundation in logic and software development. Practical, analytical profile focused on results.",
    panelProjectsLoading: "Loading projects...",
    panelExperiencesLoading: "Loading experience...",
    panelCertificatesLoading: "Loading certificates...",
    panelContact: "- LinkedIn: <a href=\"https://www.linkedin.com/in/davi-ponce-manieri/\" target=\"_blank\" rel=\"noopener\">linkedin.com/in/davi-ponce-manieri</a>\n- GitHub: <a href=\"https://github.com/dvmanieri44\" target=\"_blank\" rel=\"noopener\">github.com/dvmanieri44</a>\n- Phone: +55 (16) 997037115\n- Email: dvponce3@gmail.com",
    emptyProjects: "No projects found.",
    emptyExperiences: "No experience found.",
    emptyCertificates: "No certificates found.",
    errorProjects: "Unable to load projects.",
    errorExperiences: "Unable to load experiences.",
    errorCertificates: "Unable to load certificates.",
    projectStatusDone: "Completed",
    projectStatusOngoing: "In progress",
    labelCurrent: "Current",
    experienceCurrent: "Current role",
    certificateStatusCurrent: "In progress",
    certificateFormacao: "Education",
    projectLinkOpen: "Open project",
    popupTabProjects: "Projects",
    popupTabCertificates: "Certificates",
    popupTabExperiences: "Experience",
    popupAriaAdd: "Add",
    popupTitleProject: "New project",
    popupTitleCertificate: "New certificate",
    popupTitleExperience: "New experience",
    popupLabelTitle: "Title",
    popupLabelDescription: "Description",
    popupLabelUrl: "URL",
    popupLabelStart: "Start",
    popupLabelEnd: "End",
    popupLabelFinished: "Completed",
    popupLabelInstitution: "Issuing institution",
    popupLabelCurrent: "Currently studying",
    popupLabelCompany: "Company name",
    popupLabelRole: "Role title",
    popupLabelEntryDate: "Start date",
    popupLabelExitDate: "End date",
    popupLabelCurrentJob: "Current job",
    popupButtonCancel: "Cancel",
    popupButtonSave: "Save",
    popupStatusSaving: "Saving...",
    popupStatusProjectSaved: "Project saved.",
    popupStatusCertificateSaved: "Certificate saved.",
    popupStatusExperienceSaved: "Experience saved.",
    popupStatusError: "Error while saving.",
    promptPassword: "Enter password",
    promptWrongPassword: "Wrong password."
  }
};

let currentLang = "pt";

export function initLanguageSwitcher() {
  const switcher = document.getElementById("language-switcher");
  if (!switcher) return;

  setLanguage(switcher.value || "pt");
  switcher.addEventListener("change", (e) => {
    setLanguage(e.target.value);
  });
}

export function t(key) {
  return translations[currentLang]?.[key] ?? key;
}

export function setLanguage(lang) {
  currentLang = translations[lang] ? lang : "pt";
  document.documentElement.lang = currentLang === "pt" ? "pt-BR" : "en";

  document.querySelectorAll("[data-i18n]").forEach(el => {
    const key = el.getAttribute("data-i18n");
    const value = t(key);
    if (typeof value === "string") {
      el.innerHTML = value;
    }
  });

  document.querySelectorAll("[data-i18n-attr]").forEach(el => {
    const attrSpec = el.getAttribute("data-i18n-attr");
    if (!attrSpec) return;
    const parts = attrSpec.split(",").map(part => part.trim()).filter(Boolean);
    parts.forEach(part => {
      const [attr, key] = part.split(":").map(chunk => chunk.trim());
      if (!attr || !key) return;
      const value = t(key);
      if (typeof value === "string") {
        el.setAttribute(attr, value);
      }
    });
  });

  document.dispatchEvent(new CustomEvent("languagechange", { detail: currentLang }));
}



