import{initializeApp as H}from"https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";import{getFirestore as q}from"https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";var O={apiKey:"AIzaSyCmIXlBm6Yr0umZFS0n1s7m1CeIgu4Tp_4",authDomain:"portifolio-davi-3b30a.firebaseapp.com",projectId:"portifolio-davi-3b30a",storageBucket:"portifolio-davi-3b30a.firebasestorage.app",messagingSenderId:"528239006796",appId:"1:528239006796:web:6eccb93fdb3edb8b2590e9"};function D(){let t=H(O);return q(t)}function F(t){anime.timeline({easing:"easeInOutSine"}).add({targets:".splash-content",opacity:[0,1],duration:1200}).add({targets:".splash-line",height:"120px",duration:1e3}).add({targets:".splash",opacity:[1,0],delay:200,duration:1e3,complete:()=>{let r=document.querySelector(".splash");r&&(r.style.display="none");let p=document.querySelector(".app");p&&p.classList.remove("hidden"),z(),typeof t=="function"&&t()}})}function z(){anime({targets:".vertical-line",height:"180px",duration:2e3,easing:"easeInOutSine"}),anime({targets:".content",opacity:[0,1],translateY:[20,0],delay:100,duration:1800,easing:"easeOutExpo"}),anime({targets:".nav, .footer",opacity:[0,1],delay:1200,duration:1500,easing:"linear"}),U()}function U(){let t=document.querySelector(".hero-canvas");if(!t)return;let e=t.getContext("webgl",{alpha:!0,antialias:!0});if(!e)return;let r=`
    attribute vec2 a_pos;
    varying vec2 v_uv;
    void main() {
      v_uv = a_pos * 0.5 + 0.5;
      gl_Position = vec4(a_pos, 0.0, 1.0);
    }
  `,p=`
    precision mediump float;
    uniform vec2 u_res;
    uniform float u_time;
    uniform vec3 u_color;
    uniform float u_alphaScale;
    varying vec2 v_uv;

    float hash(vec2 p) {
      return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453123);
    }

    float noise(vec2 p) {
      vec2 i = floor(p);
      vec2 f = fract(p);
      vec2 u = f * f * (3.0 - 2.0 * f);
      float a = hash(i);
      float b = hash(i + vec2(1.0, 0.0));
      float c = hash(i + vec2(0.0, 1.0));
      float d = hash(i + vec2(1.0, 1.0));
      return mix(mix(a, b, u.x), mix(c, d, u.x), u.y);
    }

    float dotField(vec2 p, float scale, float jitter, float softness) {
      vec2 gp = p * scale;
      vec2 id = floor(gp);
      vec2 f = fract(gp) - 0.5;
      vec2 j = vec2(hash(id + 1.3), hash(id + 2.1)) - 0.5;
      f -= j * jitter;
      float d = length(f);
      float r = 0.035 + 0.02 * hash(id + 4.7);
      return smoothstep(r, r - softness, d);
    }

    void main() {
      vec2 p = v_uv - 0.5;
      p.x *= u_res.x / u_res.y;

      vec2 flow = vec2(
        sin(p.y * 1.6 + u_time * 0.08),
        cos(p.x * 1.2 + u_time * 0.06)
      );
      p += 0.03 * flow;

      float d1 = dotField(p + u_time * 0.006, 22.0, 0.22, 0.03);
      float d2 = dotField(p * 1.1 - u_time * 0.005, 36.0, 0.18, 0.025);
      float d3 = dotField(p * 0.9 + u_time * 0.004, 16.0, 0.24, 0.035);

      float dots = clamp(d1 * 0.55 + d2 * 0.5 + d3 * 0.35, 0.0, 1.0);
      float fog = smoothstep(0.25, 1.0, noise(p * 2.6 + u_time * 0.03)) * 0.04;

      float alpha = clamp((dots * 0.45 + fog) * u_alphaScale, 0.0, 0.65);
      vec3 color = u_color * (0.55 + 0.25 * dots);

      gl_FragColor = vec4(color, alpha);
    }
  `;function c(m,s){let b=e.createShader(m);return e.shaderSource(b,s),e.compileShader(b),b}let o=c(e.VERTEX_SHADER,r),n=c(e.FRAGMENT_SHADER,p),i=e.createProgram();e.attachShader(i,o),e.attachShader(i,n),e.linkProgram(i);let d=e.getAttribLocation(i,"a_pos"),f=e.getUniformLocation(i,"u_res"),y=e.getUniformLocation(i,"u_time"),h=e.getUniformLocation(i,"u_color"),v=e.getUniformLocation(i,"u_alphaScale"),g=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,g),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,1]),e.STATIC_DRAW),e.clearColor(0,0,0,0),e.enable(e.BLEND),e.blendFunc(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA);function j(){let m=t.getBoundingClientRect(),s=window.devicePixelRatio||1;t.width=Math.max(1,Math.floor(m.width*s)),t.height=Math.max(1,Math.floor(m.height*s)),e.viewport(0,0,t.width,t.height)}j(),window.ResizeObserver?new ResizeObserver(j).observe(t):window.addEventListener("resize",j);let A=performance.now();function C(m){let s=m==="light",b=s?[.08,.08,.08]:[1,1,1],x=s?1.6:1;e.useProgram(i),e.uniform3f(h,b[0],b[1],b[2]),e.uniform1f(v,x)}let u=document.body.dataset.theme==="light"?"light":"dark";C(u),document.addEventListener("themechange",m=>{C(m.detail)});function l(){let m=(performance.now()-A)/1e3;e.clear(e.COLOR_BUFFER_BIT),e.useProgram(i),e.bindBuffer(e.ARRAY_BUFFER,g),e.enableVertexAttribArray(d),e.vertexAttribPointer(d,2,e.FLOAT,!1,0,0),e.uniform2f(f,t.width,t.height),e.uniform1f(y,m),e.drawArrays(e.TRIANGLE_STRIP,0,4),requestAnimationFrame(l)}l()}var $={pt:{splash:"Portifolio de<br><strong>Davi Manieri</strong>",name:"DAVI MANIERI",role:"ENGENHEIRO DE COMPUTACAO",subtitle:"Interfaces silenciosas.<br>Codigo com proposito.",enter:"Entrar",copyright:"DAVI MANIERI \xA9 2026",location:"Brasil",statusOnline:"ONLINE",langPt:"PT",langEn:"EN",themeDark:"Escuro",themeLight:"Claro",menuAria:"Navegacao principal",menuHome:"Home",menuResume:"Curriculo",menuProjects:"Projetos",menuCertificates:"Certificados",menuExperiences:"Experiencia",menuContact:"Fale comigo",panelHome:`Ola! Meu nome e Davi Manieri, sou Tecnico de Desenvolvimento de Sistemas e tenho formacao concluida em Python, alem de habilidades com outras linguagens de programacao, logica e exatas, juntamente com a dedicacao e o empenho em cada atividade que me e requisitada!
Estou a disposicao para realizar trabalhos que estejam inseridos dentro do meu contexto de formacao academica!`,panelProjectsLoading:"Carregando projetos...",panelExperiencesLoading:"Carregando experiencia...",panelCertificatesLoading:"Carregando certificados...",panelContact:`- LinkedIn: <a href="https://www.linkedin.com/in/davi-ponce-manieri/" target="_blank" rel="noopener">linkedin.com/in/davi-ponce-manieri</a>
- GitHub: <a href="https://github.com/dvmanieri44" target="_blank" rel="noopener">github.com/dvmanieri44</a>
- Telefone: +55 (16) 997037115
- Email: dvponce3@gmail.com`,emptyProjects:"Nenhum projeto cadastrado.",emptyExperiences:"Nenhuma experiencia cadastrada.",emptyCertificates:"Nenhum certificado cadastrado.",errorProjects:"Nao foi possivel carregar os projetos.",errorExperiences:"Nao foi possivel carregar as experiencias.",errorCertificates:"Nao foi possivel carregar os certificados.",projectStatusDone:"Finalizado",projectStatusOngoing:"Em andamento",labelCurrent:"Atual",experienceCurrent:"Trabalho atual",certificateStatusCurrent:"Em andamento",certificateFormacao:"Formacao",projectLinkOpen:"Abrir projeto",popupTabProjects:"Projetos",popupTabCertificates:"Certificados",popupTabExperiences:"Experiencia",popupAriaAdd:"Adicionar",popupTitleProject:"Novo projeto",popupTitleCertificate:"Novo certificado",popupTitleExperience:"Nova experiencia",popupLabelTitle:"Titulo",popupLabelDescription:"Descricao",popupLabelUrl:"URL",popupLabelStart:"Inicio",popupLabelEnd:"Fim",popupLabelFinished:"Finalizado",popupLabelInstitution:"Instituicao emissora",popupLabelCurrent:"Fazendo atualmente",popupLabelCompany:"Nome da empresa",popupLabelRole:"Nome do cargo",popupLabelEntryDate:"Data de entrada",popupLabelExitDate:"Data de saida",popupLabelCurrentJob:"Trabalho atual",popupButtonCancel:"Cancelar",popupButtonSave:"Salvar",popupStatusSaving:"Salvando...",popupStatusProjectSaved:"Projeto salvo.",popupStatusCertificateSaved:"Certificado salvo.",popupStatusExperienceSaved:"Experiencia salva.",popupStatusError:"Erro ao salvar.",promptPassword:"Digite a senha",promptWrongPassword:"Senha incorreta."},en:{splash:"Portfolio of<br><strong>Davi Manieri</strong>",name:"DAVI MANIERI",role:"COMPUTER ENGINEER",subtitle:"Silent interfaces.<br>Purpose-driven code.",enter:"Enter",copyright:"DAVI MANIERI \xA9 2026",location:"Brazil",statusOnline:"ONLINE",langPt:"PT",langEn:"EN",themeDark:"Dark",themeLight:"Light",menuAria:"Main navigation",menuHome:"Home",menuResume:"Resume",menuProjects:"Projects",menuCertificates:"Certificates",menuExperiences:"Experience",menuContact:"Contact",panelHome:`Hello! My name is Davi Manieri. I am a Systems Development Technician with completed training in Python, plus skills in other programming languages, logic, and math, along with dedication and commitment in every task I am asked to do.
I am available for work aligned with my academic background.`,panelProjectsLoading:"Loading projects...",panelExperiencesLoading:"Loading experience...",panelCertificatesLoading:"Loading certificates...",panelContact:`- LinkedIn: <a href="https://www.linkedin.com/in/davi-ponce-manieri/" target="_blank" rel="noopener">linkedin.com/in/davi-ponce-manieri</a>
- GitHub: <a href="https://github.com/dvmanieri44" target="_blank" rel="noopener">github.com/dvmanieri44</a>
- Phone: +55 (16) 997037115
- Email: dvponce3@gmail.com`,emptyProjects:"No projects found.",emptyExperiences:"No experience found.",emptyCertificates:"No certificates found.",errorProjects:"Unable to load projects.",errorExperiences:"Unable to load experiences.",errorCertificates:"Unable to load certificates.",projectStatusDone:"Completed",projectStatusOngoing:"In progress",labelCurrent:"Current",experienceCurrent:"Current role",certificateStatusCurrent:"In progress",certificateFormacao:"Education",projectLinkOpen:"Open project",popupTabProjects:"Projects",popupTabCertificates:"Certificates",popupTabExperiences:"Experience",popupAriaAdd:"Add",popupTitleProject:"New project",popupTitleCertificate:"New certificate",popupTitleExperience:"New experience",popupLabelTitle:"Title",popupLabelDescription:"Description",popupLabelUrl:"URL",popupLabelStart:"Start",popupLabelEnd:"End",popupLabelFinished:"Completed",popupLabelInstitution:"Issuing institution",popupLabelCurrent:"Currently studying",popupLabelCompany:"Company name",popupLabelRole:"Role title",popupLabelEntryDate:"Start date",popupLabelExitDate:"End date",popupLabelCurrentJob:"Current job",popupButtonCancel:"Cancel",popupButtonSave:"Save",popupStatusSaving:"Saving...",popupStatusProjectSaved:"Project saved.",popupStatusCertificateSaved:"Certificate saved.",popupStatusExperienceSaved:"Experience saved.",popupStatusError:"Error while saving.",promptPassword:"Enter password",promptWrongPassword:"Wrong password."}},I="pt";function N(){let t=document.getElementById("language-switcher");t&&(_(t.value||"pt"),t.addEventListener("change",e=>{_(e.target.value)}))}function a(t){return $[I]?.[t]??t}function _(t){I=$[t]?t:"pt",document.documentElement.lang=I==="pt"?"pt-BR":"en",document.querySelectorAll("[data-i18n]").forEach(e=>{let r=e.getAttribute("data-i18n"),p=a(r);typeof p=="string"&&(e.innerHTML=p)}),document.querySelectorAll("[data-i18n-attr]").forEach(e=>{let r=e.getAttribute("data-i18n-attr");if(!r)return;r.split(",").map(c=>c.trim()).filter(Boolean).forEach(c=>{let[o,n]=c.split(":").map(d=>d.trim());if(!o||!n)return;let i=a(n);typeof i=="string"&&e.setAttribute(o,i)})}),document.dispatchEvent(new CustomEvent("languagechange",{detail:I}))}import{collection as k,getDocs as P}from"https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";function R(t){let e=null,r=document.querySelector("[data-panel]"),p=document.querySelectorAll(".menu-btn");if(!r||p.length===0)return;function c(){return{home:a("panelHome"),projects:a("panelProjectsLoading"),experiences:a("panelExperiencesLoading"),certificates:a("panelCertificatesLoading"),contact:a("panelContact")}}function o(n){let i=c();e=n,r.classList.add("is-animating"),window.setTimeout(()=>{if(n==="projects"){r.innerHTML=i[n],r.classList.remove("is-animating"),G(r,t);return}if(n==="experiences"){r.innerHTML=i[n],r.classList.remove("is-animating"),V(r,t);return}if(n==="certificates"){r.innerHTML=i[n],r.classList.remove("is-animating"),W(r,t);return}r.innerHTML=i[n]||n,r.classList.remove("is-animating")},180)}p.forEach(n=>{n.addEventListener("click",()=>{if(n.tagName==="A"&&n.hasAttribute("download"))return;let i=n.dataset.section||n.textContent.trim();o(i)})}),document.addEventListener("languagechange",()=>{e&&o(e)})}function L(t){return String(t??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/'/g,"&#39;")}function E(t){if(!t)return null;if(typeof t.toDate=="function")return t.toDate();if(typeof t.seconds=="number")return new Date(t.seconds*1e3);let e=new Date(t);return Number.isNaN(e.getTime())?null:e}function w(t){let e=E(t),r=document.documentElement.lang||"pt-BR";return e?e.toLocaleDateString(r):""}async function G(t,e){try{let p=(await P(k(e,"projects"))).docs.map(o=>({id:o.id,...o.data()}));if(p.sort((o,n)=>{let i=E(o.dataInicio)?.getTime()??0,d=E(n.dataInicio)?.getTime()??0;return i-d}),p.length===0){t.innerHTML=a("emptyProjects");return}let c=p.map(o=>{let n=L(o.title),i=L(o.descricao),d=typeof o.url=="string"?o.url:"",f=w(o.dataInicio),y=w(o.dataFinal),h=o.finalizado?a("projectStatusDone"):a("projectStatusOngoing"),g=[[f,y].filter(Boolean).join(" - "),h].filter(Boolean).join("  \xB7  "),j=d?`<a class="project-link" href="${L(d)}" target="_blank" rel="noopener">${a("projectLinkOpen")}</a>`:"";return`
        <li class="project-item">
          <div class="project-title">${n||a("menuProjects")}</div>
          ${g?`<div class="project-meta">${g}</div>`:""}
          ${i?`<div class="project-desc">${i}</div>`:""}
          ${j}
        </li>
      `}).join("");t.innerHTML=`<ul class="project-list">${c}</ul>`}catch{t.innerHTML=a("errorProjects")}}async function V(t,e){try{let p=(await P(k(e,"experiences"))).docs.map(o=>({id:o.id,...o.data()}));if(p.sort((o,n)=>{let i=E(o.dataEntrada)?.getTime()??0;return(E(n.dataEntrada)?.getTime()??0)-i}),p.length===0){t.innerHTML=a("emptyExperiences");return}let c=p.map(o=>{let n=L(o.empresa),i=L(o.cargo),d=w(o.dataEntrada),f=o.trabalhoAtual?a("labelCurrent"):w(o.dataSaida),y=[d,f].filter(Boolean).join(" - "),h=o.trabalhoAtual?a("experienceCurrent"):"",v=[y,h].filter(Boolean).join("  \xB7  ");return`
        <li class="experience-item">
          <span class="experience-dot"></span>
          <div class="experience-card">
            <div class="experience-role">${i||a("popupLabelRole")}</div>
            <div class="experience-company">${n||a("popupLabelCompany")}</div>
            ${v?`<div class="experience-meta">${v}</div>`:""}
          </div>
        </li>
      `}).join("");t.innerHTML=`<ul class="experience-timeline">${c}</ul>`}catch{t.innerHTML=a("errorExperiences")}}async function W(t,e){try{let p=(await P(k(e,"certificates"))).docs.map(o=>({id:o.id,...o.data()}));if(p.sort((o,n)=>{let i=o.formacao?1:0,d=n.formacao?1:0;if(i!==d)return d-i;let f=E(o.dataInicio)?.getTime()??0;return(E(n.dataInicio)?.getTime()??0)-f}),p.length===0){t.innerHTML=a("emptyCertificates");return}let c=p.map(o=>{let n=L(o.title),i=L(o.instituicao),d=w(o.dataInicio),f=o.atual?a("labelCurrent"):w(o.dataFinal),y=[d,f].filter(Boolean).join(" - "),h=o.atual?a("certificateStatusCurrent"):"",v=o.formacao?a("certificateFormacao"):"",g=[y,h,v].filter(Boolean).join("  \xB7  ");return`
        <li class="certificate-item">
          <div class="certificate-title">${n||a("menuCertificates")}</div>
          ${i?`<div class="certificate-org">${i}</div>`:""}
          ${g?`<div class="certificate-meta">${g}</div>`:""}
        </li>
      `}).join("");t.innerHTML=`<ul class="certificate-list">${c}</ul>`}catch{t.innerHTML=a("errorCertificates")}}import{addDoc as Y,collection as J}from"https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";var B=D();N();X();K();F(()=>{R(B)});function K(){let t=document.querySelector(".footer span");if(!t)return;let e=0;t.addEventListener("click",()=>{if(e+=1,e<5)return;e=0;let r=window.prompt(a("promptPassword"));r==="2040"?Z(B):r!==null&&window.alert(a("promptWrongPassword"))})}function X(){let t=document.getElementById("theme-switcher");if(!t)return;let e=window.localStorage.getItem("theme"),r=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches:!0,p=e||(r?"dark":"light");M(p),t.value=p,t.addEventListener("change",c=>{M(c.target.value)})}function M(t){let e=t==="light"?"light":"dark";e==="light"?document.body.dataset.theme="light":document.body.removeAttribute("data-theme"),window.localStorage.setItem("theme",e),document.dispatchEvent(new CustomEvent("themechange",{detail:e}))}function Z(t){if(!t||document.querySelector(".project-popup-overlay"))return;Q();let e=document.createElement("div");e.className="project-popup-overlay";let r=[{key:"projects",label:a("popupTabProjects"),title:a("popupTitleProject"),success:a("popupStatusProjectSaved")},{key:"certificates",label:a("popupTabCertificates"),title:a("popupTitleCertificate"),success:a("popupStatusCertificateSaved")},{key:"experiences",label:a("popupTabExperiences"),title:a("popupTitleExperience"),success:a("popupStatusExperienceSaved")}],p=new Map(r.map(u=>[u.key,u])),c=document.createElement("div");c.className="project-popup-card",c.innerHTML=`
    <div class="project-popup-shell">
      <nav class="project-popup-nav" aria-label="${a("popupAriaAdd")}">
        ${r.map((u,l)=>`
            <button type="button" class="project-popup-tab${l===0?" is-active":""}" data-type="${u.key}">
              ${u.label}
            </button>
          `).join("")}
      </nav>
      <div class="project-popup-body">
        <div class="project-popup-title" data-popup-title>${r[0].title}</div>
        <form class="project-popup-form" data-type="${r[0].key}">
          <div class="project-popup-section" data-section="projects">
            <label>
              ${a("popupLabelTitle")}
              <input name="title" type="text" autocomplete="off" required>
            </label>
            <label>
              ${a("popupLabelDescription")}
              <textarea name="descricao" rows="3"></textarea>
            </label>
            <label>
              ${a("popupLabelUrl")}
              <input name="url" type="url" autocomplete="off">
            </label>
            <div class="project-popup-row">
              <label>
                ${a("popupLabelStart")}
                <input name="dataInicio" type="date">
              </label>
              <label>
                ${a("popupLabelEnd")}
                <input name="dataFinal" type="date">
              </label>
            </div>
            <label class="project-popup-check">
              <input name="finalizado" type="checkbox">
              ${a("popupLabelFinished")}
            </label>
          </div>
          <div class="project-popup-section is-hidden" data-section="certificates">
            <label>
              ${a("popupLabelTitle")}
              <input name="certTitulo" type="text" autocomplete="off" required>
            </label>
            <label>
              ${a("popupLabelInstitution")}
              <input name="certInstituicao" type="text" autocomplete="off" required>
            </label>
            <label class="project-popup-check">
              <input name="certFormacao" type="checkbox">
              ${a("certificateFormacao")}
            </label>
            <div class="project-popup-row">
              <label>
                ${a("popupLabelStart")}
                <input name="certInicio" type="date" required>
              </label>
              <label>
                ${a("popupLabelEnd")}
                <input name="certFim" type="date">
              </label>
            </div>
            <label class="project-popup-check">
              <input name="certAtual" type="checkbox">
              ${a("popupLabelCurrent")}
            </label>
          </div>
          <div class="project-popup-section is-hidden" data-section="experiences">
            <label>
              ${a("popupLabelCompany")}
              <input name="empresa" type="text" autocomplete="off" required>
            </label>
            <label>
              ${a("popupLabelRole")}
              <input name="cargo" type="text" autocomplete="off" required>
            </label>
            <div class="project-popup-row">
              <label>
                ${a("popupLabelEntryDate")}
                <input name="entrada" type="date" required>
              </label>
              <label>
                ${a("popupLabelExitDate")}
                <input name="saida" type="date">
              </label>
            </div>
            <label class="project-popup-check">
              <input name="trabalhoAtual" type="checkbox">
              ${a("popupLabelCurrentJob")}
            </label>
          </div>
          <div class="project-popup-actions">
            <button type="button" class="project-popup-cancel">${a("popupButtonCancel")}</button>
            <button type="submit" class="project-popup-submit">${a("popupButtonSave")}</button>
          </div>
          <div class="project-popup-status" aria-live="polite"></div>
        </form>
      </div>
    </div>
  `,e.appendChild(c),document.body.appendChild(e);let o=c.querySelector(".project-popup-form"),n=c.querySelector(".project-popup-cancel"),i=c.querySelector(".project-popup-status"),d=c.querySelector("[data-popup-title]"),f=Array.from(c.querySelectorAll(".project-popup-tab")),y=Array.from(c.querySelectorAll(".project-popup-section")),h=c.querySelector('input[name="saida"]'),v=c.querySelector('input[name="trabalhoAtual"]'),g=c.querySelector('input[name="certFim"]'),j=c.querySelector('input[name="certAtual"]'),A=u=>{y.forEach(l=>{let m=l.dataset.section===u;l.classList.toggle("is-hidden",!m),l.querySelectorAll("input, textarea, select").forEach(s=>{s.disabled=!m})})};function C(){e.remove()}if(n.addEventListener("click",C),e.addEventListener("click",u=>{u.target===e&&C()}),v&&h){let u=()=>{let l=v.checked;h.disabled=l,l&&(h.value="")};v.addEventListener("change",u),u()}if(j&&g){let u=()=>{let l=j.checked;g.disabled=l,l&&(g.value="")};j.addEventListener("change",u),u()}f.forEach(u=>{u.addEventListener("click",()=>{let l=u.dataset.type;if(!p.has(l))return;f.forEach(s=>s.classList.toggle("is-active",s===u));let m=p.get(l);d.textContent=m.title,o.dataset.type=l,A(l),i.textContent=""})}),A(o.dataset.type||"projects"),o.addEventListener("submit",async u=>{if(u.preventDefault(),o.dataset.submitting==="true")return;o.dataset.submitting="true",i.textContent=a("popupStatusSaving");let l=o.dataset.type||"projects",m=p.get(l)||r[0],s=new FormData(o),b={};if(l==="projects"){let x=s.get("dataInicio"),S=s.get("dataFinal");b={title:String(s.get("title")||""),descricao:String(s.get("descricao")||""),url:String(s.get("url")||""),dataInicio:x?new Date(String(x)):null,dataFinal:S?new Date(String(S)):null,finalizado:s.get("finalizado")==="on"}}else if(l==="certificates"){let x=s.get("certInicio"),S=s.get("certFim"),T=s.get("certAtual")==="on";b={title:String(s.get("certTitulo")||""),instituicao:String(s.get("certInstituicao")||""),dataInicio:x?new Date(String(x)):null,dataFinal:T?null:S?new Date(String(S)):null,atual:T,formacao:s.get("certFormacao")==="on"}}else if(l==="experiences"){let x=s.get("entrada"),S=s.get("saida"),T=s.get("trabalhoAtual")==="on";b={empresa:String(s.get("empresa")||""),cargo:String(s.get("cargo")||""),dataEntrada:x?new Date(String(x)):null,dataSaida:T?null:S?new Date(String(S)):null,trabalhoAtual:T}}try{await Y(J(t,l),b),i.textContent=m.success,o.reset(),window.setTimeout(C,800)}catch{i.textContent=a("popupStatusError")}finally{o.dataset.submitting="false"}})}function Q(){if(document.getElementById("project-popup-styles"))return;let t=document.createElement("style");t.id="project-popup-styles",t.textContent=`
    .project-popup-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 24px;
      z-index: 9999;
    }
    .project-popup-card {
      width: min(760px, 94vw);
      background: #0f1115;
      color: #f4f6fb;
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.35);
      font-family: inherit;
    }
    .project-popup-shell {
      display: flex;
      gap: 18px;
      align-items: stretch;
    }
    .project-popup-nav {
      display: flex;
      flex-direction: column;
      gap: 8px;
      min-width: 160px;
      padding-right: 16px;
      border-right: 1px solid rgba(255, 255, 255, 0.12);
    }
    .project-popup-tab {
      border: 1px solid rgba(255, 255, 255, 0.15);
      background: transparent;
      color: inherit;
      padding: 8px 10px;
      text-align: left;
      font-size: 12px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      cursor: pointer;
      border-radius: 10px;
      transition: border-color 0.2s ease, background 0.2s ease;
      font-family: inherit;
    }
    .project-popup-tab.is-active {
      border-color: rgba(255, 255, 255, 0.45);
      background: rgba(255, 255, 255, 0.08);
    }
    .project-popup-body {
      flex: 1;
      min-width: 0;
    }
    .project-popup-title {
      font-size: 18px;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }
    .project-popup-section.is-hidden {
      display: none;
    }
    .project-popup-form label {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      margin-bottom: 12px;
    }
    .project-popup-form input,
    .project-popup-form textarea {
      background: rgba(255, 255, 255, 0.06);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 8px;
      padding: 10px 12px;
      color: inherit;
      font-size: 14px;
      font-family: inherit;
    }
    .project-popup-form textarea {
      resize: vertical;
    }
    .project-popup-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
    }
    .project-popup-check {
      flex-direction: row;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      margin-bottom: 16px;
    }
    .project-popup-check input {
      width: 16px;
      height: 16px;
      margin: 0;
    }
    .project-popup-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 8px;
    }
    .project-popup-actions button {
      border: none;
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      cursor: pointer;
      font-family: inherit;
    }
    .project-popup-cancel {
      background: transparent;
      color: inherit;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    .project-popup-submit {
      background: #f4f6fb;
      color: #0f1115;
    }
    .project-popup-status {
      margin-top: 10px;
      font-size: 12px;
      min-height: 16px;
      opacity: 0.8;
    }
    @media (max-width: 640px) {
      .project-popup-shell {
        flex-direction: column;
      }
      .project-popup-nav {
        flex-direction: row;
        padding-right: 0;
        padding-bottom: 12px;
        border-right: none;
        border-bottom: 1px solid rgba(255, 255, 255, 0.12);
      }
      .project-popup-tab {
        flex: 1;
        text-align: center;
      }
    }
  `,document.head.appendChild(t)}
